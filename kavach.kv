#:kivy 2.2.1

ScreenManager :
    MainWin:
    EmergencyContacts:
    AddEmergencyContacts:
    ViewEmergencyContacts:
    EditEmergencyContacts:
    UpdateContactsData:
    DeleteEmergencyContacts:
    
#Main GUI Win
<MainWin>:
    name : "Main_Menu"
    BoxLayout:
        orientation:"vertical"

        #Emergency Button
        Button:
            text: "KAVACH"
            # size: , 
            size_hint: None , None
            width:"800dp"
            height:"100dp"
            # x, center-x, right
            # y, center-y, top
            pos_hint:{"x": 0} 

        #Emergency Contacts
        Button:
            text: "Emergency Contacts"
            # size: , 
            size_hint: None , None
            width:"200dp"
            height:"100dp"
            # x, center-x, right
            # y, center-y, top
            pos_hint:{"x": 0} 
            on_release :  
                app.root.current = "Contacts_Menu"
                root.manager.transition.direction = "left"

        #Voice Recognition
        Button:
            text: "Voice Recognition"
            size_hint: None , None
            width:"200dp"
            height:"100dp"
            # x, center-x, right
            # y, center-y, top
            pos_hint:{"x": 0} 

        #Lock Screen Pattern
        Button:
            text: "Lock screen pattern"
            size_hint: None , None
            width:"200dp"
            height:"100dp"
            # x, center-x, right
            # y, center-y, top
            pos_hint:{"x": 0} 

        #Lock Screen Pin
        Button:
            text: "Lock screen pin"
            size_hint: None , None
            width:"200dp"
            height:"100dp"
            # x, center-x, right
            # y, center-y, top
            pos_hint:{"x": 0} 
        
        #Adds a widget on the home screen to send SOS
        Button:
            text: "Home screen widget"
            size_hint: None , None
            width:"200dp"
            height:"100dp"
            # x, center-x, right
            # y, center-y, top
            pos_hint:{"x": 0} 


#Emergency Menu Win
<EmergencyContacts>:
    name : "Contacts_Menu"
    BoxLayout:
        orientation: "vertical"

        # Top Frame
        BoxLayout:
            size_hint : 1,.2
             

            Button:
                text: "Back"
                size_hint: .2, 1
                on_release: 
                    app.root.current = "Main_Menu"
                    root.manager.transition.direction = "right"

            Label:
                size_hint: .8, 1
                text: "Kavach"
                font_size: 40

        #Add Button
        Button : 
            size_hint : 1,.2
            text : "Add"
            on_release : 
                app.root.current = "Add_Contacts"
                root.manager.transition.direction = "left"
        
        #view button 
        Button : 
            size_hint : 1,.2
            text : "View"
            on_release : 
                app.root.current = "View_Contacts"
                root.manager.transition.direction = "left"
                root.view()

        #Edit button 
        Button : 
            size_hint : 1,.2
            text : "Edit"
            on_release : 
                app.root.current = "Edit_Contacts"
                root.manager.transition.direction = "left"
                root.view()
        

        #Delete Button
        Button : 
            size_hint : 1,.2
            text : "Delete"
            on_release : 
                app.root.current = "Delete_Contacts"
                root.manager.transition.direction = "left"
                root.view()

#Add Emergency Contacts Window
<AddEmergencyContacts>:
    name : "Add_Contacts"
    id : addContacts
    BoxLayout:
        orientation: "vertical"

        # Top Frame
        BoxLayout:
            size_hint : 1,.2
             

            Button:
                text: "Back"
                size_hint: .2, 1
                on_release: 
                    app.root.current = "Contacts_Menu"
                    root.manager.transition.direction = "right"

            Label:
                size_hint: .8, 1
                text: "Kavach"
                font_size: 40

        Label :
            text : "Contact Info"
            font_size : 30
        
        #Name
        BoxLayout:
            Label :
                text : "Name"
                font_size : 30
                size_hint : .4,1
            
            TextInput :
                id : Name_Input 
                multiline : False
                size_hint : .6,1
                on_text_validate : root.nameTextValidate(self)        
        
        #Contact Number 
        BoxLayout:
            Label :
                text : "Number"
                font_size : 30
                size_hint : .4,1
            
            TextInput :
                id : Contact_Input
                multiline : False
                size_hint : .6,1   
                on_text_validate : 
                    root.numberTextValidate(self)
                    


        #Add Button for adding Contacts to CSV File
        Button:
            text: "Add Contact"
            on_release : 
                root.addContactButton(Name_Input,Contact_Input)
                

<ViewEmergencyContacts>:
    name: "View_Contacts"
    BoxLayout:
        orientation: "vertical"

       # Top Frame
        BoxLayout:
            size_hint : 1,.2
             

            Button:
                text: "Back"
                size_hint: .2, 1
                on_release: 
                    app.root.current = "Contacts_Menu"
                    root.manager.transition.direction = "right"

            Label:
                size_hint: .8, 1
                text: "Kavach"
                font_size: 40

        Label:
            size_hint : 1,.2
            # height : "130dp"
            text: "Contacts"
            font_size: 30

        BoxLayout:
            size_hint : 1,.6 
            Label:
                size_hint: .5, None
                height: "40dp"
                font_size : 32
                text: "Contact Name"
                text_allignment: "center"

            Label:
                size_hint: .5, None
                height: "40dp"
                font_size : 32
                text: "Contact Number"
                text_allignment: "center"

        ScrollView:
            BoxLayout:
                id: set_BoxLayout
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height

#GUI for editting contacts
<EditEmergencyContacts>:
    name: "Edit_Contacts"
    BoxLayout:
        orientation: "vertical"

        # Top Frame
        BoxLayout:
            size_hint : 1,.2
    
            Button:
                text: "Back"
                size_hint: .2, 1
                on_release: 
                    app.root.current = "Contacts_Menu"
                    root.manager.transition.direction = "right"

            Label:
                size_hint: .8, 1
                text: "Kavach"
                font_size: 40

        Label:
            size_hint : 1,.2
            # height : "130dp"
            text: "Contacts"
            font_size: 30

        BoxLayout:
            size_hint : 1,.6 
            Label:
                size_hint: .5, None
                height: "40dp"
                font_size : 32
                text: "Contact Name"
                text_allignment: "center"

            Label:
                size_hint: .5, None
                height: "40dp"
                font_size : 32
                text: "Contact Number"
                text_allignment: "center"

        ScrollView:
            BoxLayout:
                id: set_BoxLayout
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height

        Button:
            text: "Next"
            size_hint_y : .3
            on_release :
                root.updateContacts()
                app.root.current = "Edit_Update_Contacts"
                root.manager.transition.direction = "right"

#GUI for procedding the update gui to next input taking
<UpdateContactsData>:
    name : "Edit_Update_Contacts"
    BoxLayout:
        orientation: "vertical"

        # Top Frame
        BoxLayout:
            size_hint : 1,.2
             

            Button:
                text: "Back"
                size_hint: .2, 1
                on_release: 
                    app.root.current = "Edit_Contacts"
                    root.manager.transition.direction = "right"

            Label:
                size_hint: .8, 1
                text: "Kavach"
                font_size: 40

        Label :
            text : "Update Contact Info"
            font_size : 30
        
        #Name
        BoxLayout:
            Label :
                text : "Name"
                font_size : 30
                size_hint : .4,1
            
            TextInput :
                id : Name_Input 
                multiline : False
                size_hint : .6,1
                on_text_validate : root.nameTextValidate(self)        
        
        #Contact Number 
        BoxLayout:
            Label :
                text : "Number"
                font_size : 30
                size_hint : .4,1
            
            TextInput :
                id : Contact_Input
                multiline : False
                size_hint : .6,1   
                on_text_validate : 
                    root.numberTextValidate(self)

        #Add Button for adding Contacts to CSV File
        Button:
            text: "Upadate Contact"
            on_release : 
                root.updateContactButton(Name_Input,Contact_Input)


#GUI for deleting Contacts
<DeleteEmergencyContacts>:
    name : "Delete_Contacts"
    BoxLayout:
        orientation: "vertical"

        # Top Frame
        BoxLayout:
            size_hint : 1,.2
    
            Button:
                text: "Back"
                size_hint: .2, 1
                on_release: 
                    app.root.current = "Contacts_Menu"
                    root.manager.transition.direction = "right"

            Label:
                size_hint: .8, 1
                text: "Kavach"
                font_size: 40

        Label:
            size_hint : 1,.2
            # height : "130dp"
            text: "Contacts"
            font_size: 30

        BoxLayout:
            size_hint : 1,.6 
            Label:
                size_hint: .5, None
                height: "40dp"
                font_size : 32
                text: "Contact Name"
                text_allignment: "center"

            Label:
                size_hint: .5, None
                height: "40dp"
                font_size : 32
                text: "Contact Number"
                text_allignment: "center"

        ScrollView:
            BoxLayout:
                id: set_BoxLayout
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height

        Button:
            text: "Delete"
            on_release :
                root.deleteContacts()
                
